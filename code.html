<!doctype html>
<html lang="en">

<head>
    <title>SuperDog Events - A Coding Challenge</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicons -->
    <link href="/img/superdog.png" rel="icon">
    <link href="/img/favicon_apple_touch_trans.png" rel="apple-touch-icon">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.21.0/themes/prism-twilight.min.css"
        integrity="sha512-akb4nfKzpmhujLUyollw5waBPeohuVf0Z5+cL+4Ngc4Db+V8szzx6ZTujguFjpmD076W8LImVIbOblmQ+vZMKA=="
        crossorigin="anonymous">
    <link rel="stylesheet" href="/css/site.css">
    <link rel="stylesheet" href="/css/superdog.css">
    <link rel="stylesheet" href="/css/prismTomorrow.css">
</head>

<body>
    <header>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark">
            <div class="container">

                <a class="navbar-brand" href="index.html">
                    <img src="/img/Superdog_Sm_trans.png" width="50"> SuperDog Events</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                    aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="app.html">The App</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="code.html">See The Code</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/Young-Jung/SuperDogEvents" target="_blank">Get
                                The
                                Code</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://youngjung.netlify.app/" target="_blank">About</a>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main role="main" class="container">
        <div class="container-fluid">
            <div class="dogContainer">
                <div class="row">
                    <div class="col">
                        <section>

                            <h1 style="margin-top: 30px;">Super Dog Events: A Coding Challenge</h1>
                            <strong>The Functions that make Super Dog Events Super.</strong>
                            <br><br>
                            <ul class="text-dark">
                                <li>Build Dropdown</li>
                                <li>Get Events</li>
                                <li>Display Statistics</li>
                                <li>Display Data</li>
                                <li>Save Event Data</li>
                            </ul>
                            <h6 class="card-text ml-1 mb-3">
                                Click the section links below to learn more about the code.
                            </h6>
                        </section>
                        <!-- Collapsible Sections -->
                        <div class="accordion" id="accordionSuperDogEvents">
                            <!-- Build Payment Schedule -->
                            <div class="card">
                                <div class="card-header" id="headingOne">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapseBuildDropDown" aria-expanded="true"
                                            aria-controls="collapseBuildDropDown">
                                            Build Dropdown
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapseBuildDropDown" class="collapse show" aria-labelledby="headingOne"
                                    data-parent="#accordionSuperDogEvents">
                                    <div class="card-body">
                                        <h5>Build Dropdown</h5>
                                        <p class="mb-3">
                                            This function is the entry point for the application.
                                        </p>
                                        <p>
                                            <span class="badge badge-info">Lines 5</span>
                                            Get Event Data.
                                        </p>
                                        <p>
                                            <span class="badge badge-info">Line 8-17</span>
                                            Display Dropdown
                                        </p>


                                        <!-- Start Code -->
                                        <pre class="line-numbers"><code class="language-javascript">
function displayDropDown() {
    var eventDD = document.getElementById("eventDropDown");
    let curEvents = [];
    curEvents = getData();
    let distinctEvents = [...new Set(curEvents.map((ev) => ev.city))];

    let linkHTMLEnd =
        '<div class="dropdown-divider"></div><a class="dropdown-item" onclick="getEvents(this)" data-string="All" >All</a>';
    let resultHTML = "";

    for (let i = 0; i < distinctEvents.length; i++) {
        resultHTML += `<a class="dropdown-item" onclick="getEvents(this)" data-string="${distinctEvents[i]}">${distinctEvents[i]}</a>`;

    }
    resultHTML += linkHTMLEnd;
    eventDD.innerHTML = resultHTML;
}
</code></pre>
                                        <!-- End Code -->

                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header" id="headingTwo">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                            data-target="#collapseGetPayments" aria-expanded="false"
                                            aria-controls="collapseGetPayments">
                                            Get Events
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapseGetPayments" class="collapse" aria-labelledby="headingTwo"
                                    data-parent="#accordionSuperDogEvents">
                                    <div class="card-body">
                                        <h5>Get Events</h5>
                                        <p class="mb-3">
                                            This function is to get event information.
                                        </p>
                                        <p>
                                            <span class="badge badge-info">Lines 4</span>
                                            Get which city the user select.
                                        </p>
                                        <p>
                                            <span class="badge badge-info">Line 5 (9-21)</span>
                                            Display the header part for only the filtered city.
                                        </p>

                                        <!-- Start Code -->
                                        <pre class="line-numbers"><code class="language-javascript">
function getEvents(element) {
    // getFiltering
    let city = element.getAttribute("data-string");
    getFiltering(city);
    displayStats();
}

function getFiltering(city) {
    curEvents = JSON.parse(localStorage.getItem("storageArray")) || eventsArray;
    filteredEvents = curEvents;
    document.getElementById("statsHeader").innerHTML = `Stats For ${city} Events`;
    if (city != "All") {
        //Explain how array filtering works-
        filteredEvents = curEvents.filter(function (item) {
            if (item.city == city) {
                return item;
            }
        });
    }
}
</code></pre>
                                        <!-- End Code -->

                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header" id="headingThree">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                            data-target="#collapseDisplayStats" aria-expanded="false"
                                            aria-controls="collapseDisplayStats">
                                            Display Statistics
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapseDisplayStats" class="collapse" aria-labelledby="headingThree"
                                    data-parent="#accordionSuperDogEvents">
                                    <div class="card-body">
                                        <h5>Display Statistics</h5>
                                        <p class="mb-3">
                                            This function is to display statistics.
                                        </p>


                                        <!-- Start Code -->
                                        <pre class="line-numbers"><code class="language-javascript">
function displayStats() {
    let total = 0;
    let average = 0;
    let most = 0;
    let least = -1;
    let currentAttendence = 0;

    for (let i = 0; i < filteredEvents.length; i++) {
        currentAttendance = parseInt(filteredEvents[i].attendance);
        total += currentAttendance;

        if (most < currentAttendance) {
            most = currentAttendance;
        }

        if (least > currentAttendance || least < 0) {
            least = currentAttendance;
        }
    }

    average = total / filteredEvents.length;
    document.getElementById("total").innerHTML = total.toLocaleString();
    document.getElementById("most").innerHTML = most.toLocaleString();
    document.getElementById("least").innerHTML = least.toLocaleString();
    document.getElementById("average").innerHTML = average.toLocaleString(
        undefined, {
            minimumFractionDigits: 0,
            maximumFractionDigits: 0,
        }
    );
}

                                            </code></pre>
                                        <!-- End Code -->

                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header" id="headingFour">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                            data-target="#collapseDisplayData" aria-expanded="false"
                                            aria-controls="collapseDisplayData">
                                            Display Data
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapseDisplayData" class="collapse" aria-labelledby="headingFour"
                                    data-parent="#accordionSuperDogEvents">
                                    <div class="card-body">
                                        <h5>Display Data</h5>
                                        <p class="mb-3">
                                            This function is to display all the events.
                                        </p>

                                        <!-- Start Code -->
                                        <pre class="line-numbers"><code class="language-javascript">
function displayData() {
    const template = document.getElementById("Data-Template");
    const resultsBody = document.getElementById("resultsBody");
    // Clear table first
    resultsBody.innerHTML = "";
    curEvents = JSON.parse(localStorage.getItem("storageArray")) || [];

    if (curEvents.length == 0) {
        curEvents = eventsArray;
        localStorage.setItem("storageArray", JSON.stringify(curEvents));
    }

    // same as importNode (can be outside this html)

    for (let i = 0; i < curEvents.length; i++) {
        const dataRow = document.importNode(template.content, true);

        dataRow.getElementById("event").textContent = curEvents[i].event;
        dataRow.getElementById("city").textContent = curEvents[i].city;
        dataRow.getElementById("state").textContent = curEvents[i].state;
        dataRow.getElementById("attendance").textContent = curEvents[i].attendance;
        dataRow.getElementById("eventDate").textContent = curEvents[i].eventDate;
        //dataRow.getElementById("eventDate").textContent = formatPhoneNumber(curEvents[i].eventDate);

        // Add the row to the page
        resultsBody.appendChild(dataRow);
    }
}
                                            </code></pre>
                                        <!-- End Code -->

                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header" id="headingFive">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                            data-target="#collapseSaveEvent" aria-expanded="false"
                                            aria-controls="collapseSaveEvent">
                                            Save Event Data
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapseSaveEvent" class="collapse" aria-labelledby="headingFive"
                                    data-parent="#accordionSuperDogEvents">
                                    <div class="card-body">
                                        <h5>Save Event Data</h5>
                                        <p class="mb-3">
                                            This function is to save an event that the user entered.
                                        </p>
                                        <p>
                                            <span class="badge badge-info">Lines 25-26</span>
                                            Refresh dropdown list and statistics.
                                        </p>

                                        <!-- Start Code -->
                                        <pre class="line-numbers"><code class="language-javascript">
function saveEvent() {
    // Save Local Storage
    let curEvents = JSON.parse(localStorage.getItem("storageArray")) || eventsArray;

    let obj = {};
    obj["event"] = document.getElementById("newEvent").value;
    obj["city"] = document.getElementById("newCity").value;
    obj["state"] = document.getElementById("newState").value;
    obj["attendance"] = document.getElementById("newAttendance").value;
    // let eventDate = document.getElementById("newEventDate").value;
    // let eventDate2 = `${eventDate} 00:00`;
    // obj["eventDate"] = new Date(eventDate2).toLocaleDateString();
    obj["eventDate"] = formatDate(document.getElementById("newEventDate").value);

    curEvents.push(obj);

    localStorage.setItem("storageArray", JSON.stringify(curEvents));
    if (obj["city"] == "") {
        city = "All";
    } else {
        city = obj["city"];
    }

    getFiltering(city);
    buildDropDown();
}
                                            </code></pre>
                                        <!-- End Code -->

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>



            </div>

        </div>
    </main>
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6 text-muted">&copy; Young Jung 2021</div>
                <div class="col-lg-9 col-md-6 col-sm-6 text-muted" style="font-size:0.7rem;text-align: right;">
                    Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a>
                    from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
    <script src="/js/prismTomorrow.js"></script>
</body>

</html>